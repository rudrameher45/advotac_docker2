(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4662],{63:(e,a,l)=>{"use strict";var s=l(7260);l.o(s,"useParams")&&l.d(a,{useParams:function(){return s.useParams}}),l.o(s,"useRouter")&&l.d(a,{useRouter:function(){return s.useRouter}}),l.o(s,"useSearchParams")&&l.d(a,{useSearchParams:function(){return s.useSearchParams}})},2417:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>o});var s=l(5155),i=l(63),r=l(2115);l(8732);let t=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"],n=[{value:"advocate",label:"Advocate"},{value:"lawyer",label:"Lawyer"},{value:"intern",label:"Intern"},{value:"organisation",label:"Organisation"}];function o(){var e;let a=(0,i.useRouter)(),[l,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),[h,u]=(0,r.useState)(!0),[m,v]=(0,r.useState)(!1),[x,f]=(0,r.useState)(null),[g,j]=(0,r.useState)(null),[p,N]=(0,r.useState)(""),[S,b]=(0,r.useState)(""),[w,y]=(0,r.useState)("");(0,r.useEffect)(()=>{T()},[]);let T=async()=>{console.log("\uD83D\uDD04 [SETTINGS] Loading user profile...");let e=localStorage.getItem("authToken"),l=localStorage.getItem("userData");if(!e){console.error("❌ [SETTINGS] No token found"),window.location.replace("/auth");return}try{if(l){let e=JSON.parse(l);o({id:e.id||e.email,name:e.name,email:e.email,image:e.image})}let s=await fetch("http://localhost:8000/user-info",{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(s.ok){let e=await s.json();console.log("✅ [SETTINGS] User profile loaded:",e),c(e),N(e.full_name||""),b(e.state||""),y(e.iam_a||"")}else if(404===s.status)console.log("ℹ️ [SETTINGS] No profile found"),f("Profile not found. Please complete setup first."),setTimeout(()=>a.push("/dashboard"),2e3);else if(401===s.status||403===s.status){console.error("❌ [SETTINGS] Unauthorized"),localStorage.clear(),window.location.replace("/auth");return}}catch(e){console.error("❌ [SETTINGS] Error:",e),f("Failed to load profile data")}finally{u(!1)}},z=async e=>{if(e.preventDefault(),!p||!S||!w)return void f("Please fill in all required fields");v(!0),f(null),j(null);try{let e=localStorage.getItem("authToken");if(!e||!(null==d?void 0:d.id))return void f("Authentication error. Please login again.");let a={full_name:p,state:S,iam_a:w,profile_pic:null==l?void 0:l.image};console.log("\uD83D\uDCE4 [SETTINGS] Updating profile:",a);let s=await fetch("http://localhost:8000/user-info",{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(a)});if(s.ok){let e=await s.json();console.log("✅ [SETTINGS] Profile updated successfully"),c(e),j("Profile updated successfully!"),setTimeout(()=>j(null),3e3)}else{let e=await s.text();console.error("❌ [SETTINGS] Update failed:",e);try{let a=JSON.parse(e);throw Error(a.detail||"Failed to update profile")}catch(a){throw Error("Server error (".concat(s.status,"): ").concat(e))}}}catch(e){console.error("❌ [SETTINGS] Error updating profile:",e),f(e instanceof Error?e.message:"Failed to update profile")}finally{v(!1)}};return h?(0,s.jsxs)("div",{className:"settings-loading",children:[(0,s.jsx)("div",{className:"spinner"}),(0,s.jsx)("p",{children:"Loading settings..."})]}):(0,s.jsxs)("div",{className:"settings-container",children:[(0,s.jsxs)("aside",{className:"sidebar",children:[(0,s.jsx)("div",{className:"sidebar-header",children:(0,s.jsxs)("div",{className:"logo",children:[(0,s.jsx)("img",{src:"/advotac_logo.png",alt:"Advotac Logo",className:"logo-image"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Advotac"}),(0,s.jsx)("p",{children:"Legal AI Workspace"})]})]})}),(0,s.jsxs)("nav",{className:"sidebar-nav",children:[(0,s.jsxs)("a",{href:"/dashboard",className:"nav-item",children:[(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})}),"Overview"]}),(0,s.jsxs)("a",{href:"/assistant",className:"nav-item",children:[(0,s.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,s.jsx)("path",{d:"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"}),(0,s.jsx)("path",{d:"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z"})]}),"Assistant"]}),(0,s.jsxs)("a",{href:"/research",className:"nav-item",children:[(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"})}),"Research"]}),(0,s.jsxs)("a",{href:"/drafting",className:"nav-item",children:[(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),"Drafting"]}),(0,s.jsxs)("a",{href:"/workflow",className:"nav-item",children:[(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"Workflow"]}),(0,s.jsxs)("a",{href:"/history",className:"nav-item",children:[(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"History"]})]}),(0,s.jsxs)("div",{className:"sidebar-footer",children:[(0,s.jsxs)("a",{href:"/settings",className:"nav-item active",children:[(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Settings"]}),(0,s.jsxs)("button",{onClick:()=>{console.log("\uD83D\uDEAA [SETTINGS] Signing out..."),localStorage.clear(),window.location.replace("/auth")},className:"nav-item logout-btn",children:[(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z",clipRule:"evenodd"})}),"Logout"]})]})]}),(0,s.jsxs)("main",{className:"settings-content",children:[(0,s.jsxs)("header",{className:"settings-header",children:[(0,s.jsxs)("div",{className:"header-title",children:[(0,s.jsx)("h1",{children:"Profile Settings"}),(0,s.jsx)("p",{children:"Manage your account information and preferences"})]}),(0,s.jsxs)("div",{className:"header-actions",children:[(0,s.jsx)("button",{className:"icon-button",children:(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}),(0,s.jsx)("button",{className:"icon-button profile-button",onClick:()=>a.push("/settings"),title:"Profile Settings",children:(null==l?void 0:l.image)?(0,s.jsx)("img",{src:l.image,alt:l.name,className:"user-avatar-small"}):(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})})]})]}),(0,s.jsxs)("div",{className:"settings-card",children:[(0,s.jsxs)("div",{className:"profile-avatar-section",children:[(null==l?void 0:l.image)?(0,s.jsx)("img",{src:l.image,alt:l.name,className:"profile-avatar"}):(0,s.jsx)("div",{className:"profile-avatar-placeholder",children:(0,s.jsx)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"avatar-info",children:[(0,s.jsx)("h3",{children:null==l?void 0:l.name}),(0,s.jsx)("p",{className:"email-readonly",children:null==l?void 0:l.email}),(0,s.jsx)("span",{className:"status-badge",children:null==d?void 0:d.user_status})]})]}),(0,s.jsxs)("form",{onSubmit:z,className:"edit-form",children:[x&&(0,s.jsxs)("div",{className:"alert alert-error",children:[(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),x]}),g&&(0,s.jsxs)("div",{className:"alert alert-success",children:[(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),g]}),(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"fullName",children:"Full Name *"}),(0,s.jsx)("input",{type:"text",id:"fullName",value:p,onChange:e=>N(e.target.value),required:!0,className:"form-input",placeholder:"Enter your full name"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,s.jsx)("input",{type:"email",id:"email",value:(null==l?void 0:l.email)||"",disabled:!0,className:"form-input disabled",title:"Email cannot be changed"}),(0,s.jsx)("span",{className:"field-hint",children:"Email cannot be changed"})]})]}),(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"state",children:"State *"}),(0,s.jsxs)("select",{id:"state",value:S,onChange:e=>b(e.target.value),required:!0,className:"form-select",children:[(0,s.jsx)("option",{value:"",children:"Select your state..."}),t.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"role",children:"I am a *"}),(0,s.jsxs)("select",{id:"role",value:w,onChange:e=>y(e.target.value),required:!0,className:"form-select",children:[(0,s.jsx)("option",{value:"",children:"Select your role..."}),n.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"status",children:"Account Status"}),(0,s.jsx)("input",{type:"text",id:"status",value:(null==d?void 0:d.user_status)||"active",disabled:!0,className:"form-input disabled",title:"Status is managed by administrators"}),(0,s.jsx)("span",{className:"field-hint",children:"Status is managed by administrators"})]}),(0,s.jsxs)("div",{className:"form-actions",children:[(0,s.jsx)("button",{type:"button",onClick:()=>a.push("/dashboard"),className:"btn-secondary",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:m,className:"btn-primary",children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"spinner-small"}),"Saving..."]}):"Save Changes"})]})]})]}),(0,s.jsxs)("div",{className:"info-section",children:[(0,s.jsx)("h3",{children:"Account Information"}),(0,s.jsxs)("div",{className:"info-grid",children:[(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("span",{className:"info-label",children:"User ID"}),(0,s.jsxs)("span",{className:"info-value",children:[null==d||null==(e=d.user_id)?void 0:e.substring(0,20),"..."]})]}),(0,s.jsxs)("div",{className:"info-item",children:[(0,s.jsx)("span",{className:"info-label",children:"Member Since"}),(0,s.jsx)("span",{className:"info-value",children:(null==d?void 0:d.created_at)?new Date(d.created_at).toLocaleDateString():"N/A"})]})]})]})]})]})}},4354:(e,a,l)=>{Promise.resolve().then(l.bind(l,2417))},8732:()=>{}},e=>{e.O(0,[6208,8441,1255,7358],()=>e(e.s=4354)),_N_E=e.O()}]);