(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3116],{63:(e,o,t)=>{"use strict";var r=t(7260);t.o(r,"useParams")&&t.d(o,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(o,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(o,{useSearchParams:function(){return r.useSearchParams}})},1123:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>i});var r=t(5155),a=t(63),n=t(2115),l=t(5704);function i(){let e=(0,a.useRouter)(),[o,t]=(0,n.useState)(null),[i,s]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null),[u,g]=(0,n.useState)(""),[p,h]=(0,n.useState)(""),[x,m]=(0,n.useState)(!1),[f,b]=(0,n.useState)("text"),[y,S]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{console.log("\uD83D\uDD04 [DASHBOARD] Dashboard component mounted, checking authentication..."),console.log("\uD83D\uDD04 [DASHBOARD] Current URL:",window.location.href);let o=localStorage.getItem("authToken"),r=localStorage.getItem("userData");if(console.log("\uD83D\uDD0D [DASHBOARD] Checking localStorage for authentication..."),console.log("\uD83D\uDD0D [DASHBOARD] authToken found:",!!o),console.log("\uD83D\uDD0D [DASHBOARD] userData found:",!!r),o&&console.log("✅ [DASHBOARD] Token found in localStorage:",o.substring(0,20)+"..."),!o){console.error("❌ [DASHBOARD] No authentication token found"),console.log("\uD83D\uDD04 [DASHBOARD] Redirecting to /auth..."),e.push("/auth");return}try{var a;s(!0),console.log("\uD83D\uDCE1 [DASHBOARD] Fetching user profile from FastAPI backend...");let r=null!=(a=l.env.NEXT_PUBLIC_FASTAPI_BASE_URL)?a:"https://api.advotac.com",n=await fetch("".concat(r,"/api/user/profile"),{method:"GET",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"}});if(console.log("\uD83D\uDCE1 [DASHBOARD] API Response status:",n.status),!n.ok){if(401===n.status||403===n.status){console.error("❌ [DASHBOARD] Token invalid or expired (status:",n.status,")"),console.log("\uD83E\uDDF9 [DASHBOARD] Clearing localStorage and redirecting to /auth..."),localStorage.removeItem("authToken"),localStorage.removeItem("userData"),e.push("/auth");return}throw Error("Failed to fetch user data: ".concat(n.status))}let i=await n.json();console.log("✅ [DASHBOARD] User data received from API:",{hasName:!!(i.name||i.full_name),hasEmail:!!i.email,hasImage:!!(i.image||i.profile_picture||i.picture)});let c={name:i.name||i.full_name||"User",email:i.email||"",image:i.image||i.profile_picture||i.picture};console.log("\uD83D\uDCBE [DASHBOARD] Setting user data in state:",{name:c.name,email:c.email,hasImage:!!c.image}),t(c)}catch(r){console.error("❌ [DASHBOARD] Error fetching user data from API:",r),console.error("❌ [DASHBOARD] Error details:",{message:r instanceof Error?r.message:"Unknown error",stack:r instanceof Error?r.stack:void 0}),d("Failed to load user data"),console.log("\uD83D\uDD04 [DASHBOARD] Attempting fallback to localStorage data...");let o=localStorage.getItem("userData");if(o)try{console.log("\uD83D\uDCE6 [DASHBOARD] Parsing stored user data from localStorage...");let e=JSON.parse(o);console.log("✅ [DASHBOARD] Successfully parsed localStorage data:",{hasName:!!e.name,hasEmail:!!e.email,hasImage:!!e.image});let r={name:e.name||"User",email:e.email||"",image:e.image};console.log("\uD83D\uDCBE [DASHBOARD] Using fallback user data from localStorage"),t(r)}catch(o){console.error("❌ [DASHBOARD] Error parsing stored user data:",o),console.log("\uD83D\uDD04 [DASHBOARD] Redirecting to /auth due to parse error..."),e.push("/auth")}else console.error("❌ [DASHBOARD] No fallback data available in localStorage")}finally{s(!1),console.log("✅ [DASHBOARD] User data fetch complete")}})()},[e]);let D=async()=>{if(!u.trim())return void d("Please enter a question");m(!0),d(null);try{await new Promise(e=>setTimeout(e,2e3));let e='This is a detailed legal analysis for: "'.concat(u,'"\n\n')+"Based on Indian law and regulations:\n\n1. Legal Framework: The relevant legal provisions...\n2. Key Considerations: Important factors to consider...\n3. Precedents: Related case laws and judgments...\n4. Recommendations: Suggested course of action...\n\nNote: This is a general overview. Please consult a legal professional for specific advice.";h(e)}catch(e){console.error("Error generating response:",e),d("Failed to generate response")}finally{m(!1)}};return i?(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",fontFamily:"system-ui, -apple-system, sans-serif",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[(0,r.jsx)("div",{style:{width:"48px",height:"48px",border:"4px solid rgba(255,255,255,0.3)",borderTop:"4px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"@keyframes spin { to { transform: rotate(360deg); } }"}}),(0,r.jsx)("p",{style:{marginTop:"16px",fontSize:"18px"},children:"Loading..."})]}):o?(0,r.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",fontFamily:"system-ui, -apple-system, sans-serif"},children:(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"16px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",padding:"48px",maxWidth:"500px",width:"100%"},children:[(0,r.jsxs)("div",{style:{textAlign:"center",marginBottom:"32px"},children:[(0,r.jsx)("h1",{style:{fontSize:"32px",fontWeight:"bold",color:"#1a202c",marginBottom:"8px"},children:"Test Dashboard"}),(0,r.jsx)("p",{style:{color:"#718096",fontSize:"16px"},children:"AI Legal Assistant"}),(0,r.jsx)("div",{style:{marginTop:"8px",padding:"4px 12px",backgroundColor:"#48bb78",color:"white",borderRadius:"12px",display:"inline-block",fontSize:"12px",fontWeight:"600"},children:"v2.0 Enhanced ✨"})]}),c&&(0,r.jsx)("div",{style:{padding:"12px 16px",marginBottom:"24px",backgroundColor:"#fee",border:"1px solid #fcc",borderRadius:"8px",color:"#c33",fontSize:"14px"},children:c}),o.image&&(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"24px"},children:(0,r.jsx)("img",{src:o.image,alt:o.name,style:{width:"120px",height:"120px",borderRadius:"50%",border:"4px solid #667eea",objectFit:"cover"}})}),(0,r.jsx)("div",{style:{backgroundColor:"#f7fafc",borderRadius:"12px",padding:"16px",marginBottom:"24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"#1a202c",marginBottom:"4px"},children:o.name}),(0,r.jsx)("div",{style:{fontSize:"14px",color:"#718096"},children:o.email})]})}),(0,r.jsxs)("div",{style:{backgroundColor:"#ffffff",borderRadius:"12px",padding:"24px",marginBottom:"24px",border:"2px solid #e2e8f0"},children:[(0,r.jsx)("h2",{style:{fontSize:"20px",fontWeight:"700",color:"#1a202c",marginBottom:"16px"},children:"Ask Legal Questions"}),(0,r.jsx)("div",{style:{marginBottom:"16px"},children:(0,r.jsx)("textarea",{value:u,onChange:e=>g(e.target.value),placeholder:"Type your legal question here...",style:{width:"100%",minHeight:"120px",padding:"12px",fontSize:"15px",border:"2px solid #e2e8f0",borderRadius:"8px",resize:"vertical",fontFamily:"inherit",outline:"none",transition:"border-color 0.2s"},onFocus:e=>{e.currentTarget.style.borderColor="#667eea"},onBlur:e=>{e.currentTarget.style.borderColor="#e2e8f0"}})}),(0,r.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#4a5568",marginBottom:"8px"},children:"Suggested Questions"}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:["What are the key provisions of the Indian Contract Act?","Explain the difference between civil and criminal law in India","What are the grounds for divorce under Hindu Marriage Act?","Explain the concept of intellectual property rights"].map((e,o)=>(0,r.jsx)("button",{onClick:()=>{g(e)},style:{padding:"10px 12px",fontSize:"13px",backgroundColor:"#f7fafc",color:"#4a5568",border:"1px solid #e2e8f0",borderRadius:"6px",cursor:"pointer",textAlign:"left",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#edf2f7",e.currentTarget.style.borderColor="#667eea",e.currentTarget.style.color="#667eea"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#f7fafc",e.currentTarget.style.borderColor="#e2e8f0",e.currentTarget.style.color="#4a5568"},children:e},o))})]}),(0,r.jsx)("button",{onClick:D,disabled:x||!u.trim(),style:{width:"100%",padding:"14px",backgroundColor:x||!u.trim()?"#cbd5e0":"#667eea",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:x||!u.trim()?"not-allowed":"pointer",transition:"all 0.2s",marginBottom:"16px"},onMouseOver:e=>{!x&&u.trim()&&(e.currentTarget.style.backgroundColor="#5568d3")},onMouseOut:e=>{!x&&u.trim()&&(e.currentTarget.style.backgroundColor="#667eea")},children:x?"Generating Response...":"Generate Response"}),p&&(0,r.jsxs)("div",{style:{marginTop:"24px",padding:"20px",backgroundColor:"#f7fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,r.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",color:"#1a202c"},children:"Response"}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,r.jsx)("button",{onClick:()=>{p&&navigator.clipboard.writeText(p).then(()=>{S(!0),setTimeout(()=>S(!1),2e3)}).catch(e=>{console.error("Failed to copy:",e),d("Failed to copy to clipboard")})},style:{padding:"8px 12px",fontSize:"13px",backgroundColor:y?"#48bb78":"#667eea",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s",fontWeight:"500"},onMouseOver:e=>{y||(e.currentTarget.style.backgroundColor="#5568d3")},onMouseOut:e=>{y||(e.currentTarget.style.backgroundColor="#667eea")},children:y?"✓ Copied!":"\uD83D\uDCCB Copy"}),(0,r.jsx)("button",{onClick:()=>{if(!p)return;let e=document.createElement("a"),o=new Blob([p],{type:"text/plain"});e.href=URL.createObjectURL(o),e.download="legal-response-".concat(Date.now(),".txt"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},style:{padding:"8px 12px",fontSize:"13px",backgroundColor:"#38b2ac",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s",fontWeight:"500"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#319795"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#38b2ac"},children:"\uD83D\uDCC4 PDF"}),(0,r.jsx)("button",{onClick:()=>{if(!p)return;let e=document.createElement("a"),o=new Blob([p],{type:"application/msword"});e.href=URL.createObjectURL(o),e.download="legal-response-".concat(Date.now(),".doc"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},style:{padding:"8px 12px",fontSize:"13px",backgroundColor:"#4299e1",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s",fontWeight:"500"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#3182ce"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#4299e1"},children:"\uD83D\uDCDD DOCX"})]})]}),(0,r.jsx)("div",{style:{fontSize:"14px",lineHeight:"1.6",color:"#2d3748",whiteSpace:"pre-wrap",maxHeight:"400px",overflowY:"auto",padding:"12px",backgroundColor:"#ffffff",borderRadius:"6px"},children:p})]})]}),(0,r.jsx)("button",{onClick:()=>{console.log("\uD83D\uDEAA [DASHBOARD] Sign out initiated..."),console.log("\uD83E\uDDF9 [DASHBOARD] Clearing authentication data from localStorage..."),localStorage.removeItem("authToken"),localStorage.removeItem("userData"),console.log("✅ [DASHBOARD] localStorage cleared"),console.log("\uD83D\uDD04 [DASHBOARD] Redirecting to /auth..."),e.push("/auth")},style:{width:"100%",padding:"14px",backgroundColor:"#667eea",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#5568d3",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.4)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#667eea",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:"Sign Out"}),(0,r.jsx)("div",{style:{textAlign:"center",marginTop:"20px"},children:(0,r.jsx)("a",{href:"/dashboard",style:{color:"#667eea",fontSize:"14px",textDecoration:"none",fontWeight:"500"},onMouseOver:e=>{e.currentTarget.style.textDecoration="underline"},onMouseOut:e=>{e.currentTarget.style.textDecoration="none"},children:"Go to Full Dashboard →"})})]})}):null}},7308:(e,o,t)=>{Promise.resolve().then(t.bind(t,1123))}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=7308)),_N_E=e.O()}]);