(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6769],{63:(e,t,o)=>{"use strict";var r=o(7260);o.o(r,"useParams")&&o.d(t,{useParams:function(){return r.useParams}}),o.o(r,"useRouter")&&o.d(t,{useRouter:function(){return r.useRouter}}),o.o(r,"useSearchParams")&&o.d(t,{useSearchParams:function(){return r.useSearchParams}})},3852:(e,t,o)=>{Promise.resolve().then(o.bind(o,7756))},7756:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>s});var r=o(5155),n=o(2115),i=o(63);function a(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),[o,a]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{try{console.log("\uD83D\uDD04 [CALLBACK] Starting authentication callback handler..."),console.log("\uD83D\uDD04 [CALLBACK] Current URL:",window.location.href);let o=t.get("token"),r=t.get("error"),n=t.get("email"),i=t.get("name"),s=t.get("image");if(console.log("\uD83D\uDCCB [CALLBACK] URL Parameters received:",{hasToken:!!o,hasError:!!r,email:n,name:i,hasImage:!!s}),r){console.error("❌ [CALLBACK] Error from OAuth provider:",r),a(r),setTimeout(()=>{console.log("\uD83D\uDD04 [CALLBACK] Redirecting to /auth due to error..."),e.push("/auth")},3e3);return}if(!o){console.error("❌ [CALLBACK] No token received from OAuth provider"),a("No authentication token received"),setTimeout(()=>{console.log("\uD83D\uDD04 [CALLBACK] Redirecting to /auth due to missing token..."),e.push("/auth")},3e3);return}console.log("✅ [CALLBACK] Token received successfully"),console.log("\uD83D\uDCBE [CALLBACK] Preparing to store user data in localStorage...");let l={token:o,email:n,name:i,image:s,timestamp:Date.now()};console.log("\uD83D\uDCBE [CALLBACK] Storing authToken in localStorage..."),localStorage.setItem("authToken",o),console.log("\uD83D\uDCBE [CALLBACK] Storing userData in localStorage:",{email:l.email,name:l.name,hasImage:!!l.image,timestamp:l.timestamp}),localStorage.setItem("userData",JSON.stringify(l));let c=localStorage.getItem("authToken"),u=localStorage.getItem("userData");console.log("✅ [CALLBACK] Verification - Token stored:",!!c),console.log("✅ [CALLBACK] Verification - UserData stored:",!!u),console.log("\uD83D\uDE80 [CALLBACK] Authentication successful, redirecting to dashboard..."),console.log("\uD83D\uDE80 [CALLBACK] Using window.location.href for full page reload"),setTimeout(()=>{window.location.href="/dashboard"},100)}catch(t){console.error("❌ [CALLBACK] Exception caught in callback handler:",t),console.error("❌ [CALLBACK] Error details:",{message:t instanceof Error?t.message:"Unknown error",stack:t instanceof Error?t.stack:void 0}),a("Failed to process authentication"),setTimeout(()=>{console.log("\uD83D\uDD04 [CALLBACK] Redirecting to /auth due to exception..."),e.push("/auth")},3e3)}})()},[t,e]),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",fontFamily:"system-ui, -apple-system, sans-serif",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,r.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),(0,r.jsx)("h1",{style:{fontSize:"24px",marginTop:"20px",marginBottom:"10px"},children:"Authentication Failed"}),(0,r.jsx)("p",{style:{opacity:.9,textAlign:"center",maxWidth:"400px"},children:o}),(0,r.jsx)("p",{style:{marginTop:"10px",opacity:.7},children:"Redirecting back to sign in..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{width:"64px",height:"64px",border:"4px solid rgba(255,255,255,0.3)",borderTop:"4px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"@keyframes spin { to { transform: rotate(360deg); } }"}}),(0,r.jsx)("h1",{style:{fontSize:"24px",marginTop:"20px",marginBottom:"10px"},children:"Completing Sign In"}),(0,r.jsx)("p",{style:{opacity:.9},children:"Please wait while we set up your account..."})]})})}function s(){return(0,r.jsx)(n.Suspense,{fallback:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",fontFamily:"system-ui, -apple-system, sans-serif",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[(0,r.jsx)("div",{style:{width:"64px",height:"64px",border:"4px solid rgba(255,255,255,0.3)",borderTop:"4px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"@keyframes spin { to { transform: rotate(360deg); } }"}}),(0,r.jsx)("h1",{style:{fontSize:"24px",marginTop:"20px"},children:"Loading..."})]}),children:(0,r.jsx)(a,{})})}}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=3852)),_N_E=e.O()}]);