exports.id=746,exports.ids=[746],exports.modules={13730:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>j});var d=c(21124),e=c(38301),f=c(42378);c(77537);let g=[a=>`Summarize the key legal principles around "${a}".`,a=>`What statutory provisions are most relevant to "${a}"?`,a=>`Are there landmark cases interpreting "${a}"?`,a=>`How does "${a}" affect compliance obligations?`],h=process.env.NEXT_PUBLIC_FASTAPI_BASE_URL??"https://api.advotac.com";function i({answer:a}){return(0,d.jsx)("div",{className:"formatted-answer",children:(a=>{let b=a.replace(/\*\*\*\*/g,"").replace(/\*\*/g,"").replace(/---/g,"\n").trim(),c=[],e=b.split(/\n+/),f=[],g=0;return e.forEach(a=>{let b=a.trim();b&&(b.match(/^[A-Z\s&/]+:/)||b.match(/^Section \d+/i)?(f.length>0&&(c.push((0,d.jsx)("div",{className:"answer-paragraph",children:f.join(" ")},g++)),f=[]),c.push((0,d.jsx)("h3",{className:"answer-heading",children:b},`h-${g++}`))):b.match(/^[\d\-\(]+[\)\.]?\s/)||b.startsWith("-")?(f.length>0&&(c.push((0,d.jsx)("div",{className:"answer-paragraph",children:f.join(" ")},g++)),f=[]),c.push((0,d.jsx)("div",{className:"answer-list-item",children:b},`li-${g++}`))):f.push(b))}),f.length>0&&c.push((0,d.jsx)("div",{className:"answer-paragraph",children:f.join(" ")},g++)),c.length>0?c:(0,d.jsx)("div",{className:"answer-paragraph",children:b})})(a)})}function j(){let a=(0,f.useRouter)(),b=(0,f.useParams)().token,[c,j]=(0,e.useState)(null),[k,l]=(0,e.useState)(!0),[m,n]=(0,e.useState)(!0),[o,p]=(0,e.useState)(null),[q,r]=(0,e.useState)(null),[s,t]=(0,e.useState)(null),[u,v]=(0,e.useState)([]),[w,x]=(0,e.useState)({}),[y,z]=(0,e.useState)(!1),[A,B]=(0,e.useState)(!1),[C,D]=(0,e.useState)(null),[E,F]=(0,e.useState)({}),[G,H]=(0,e.useState)([]),[I,J]=(0,e.useState)(""),[K,L]=(0,e.useState)(null),M=()=>"undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():`fu-${Date.now()}-${Math.random().toString(16).slice(2)}`,N=u.some(a=>a.isLoading),O=G.some(a=>a.isLoading),P=Object.values(w),Q=P.length,R=a=>a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),S=(a,b)=>{let c=a=>a.toLowerCase().match(/\b[a-z0-9]{3,}\b/g)?.filter(Boolean)??[],d=c(b);if(0===d.length)return!0;let e=c(a);return 0!==e.length&&e.some(a=>d.includes(a))},T=async a=>{let b=a.trim();if(!b)return;if(!q)return void alert("Please wait for the task result to load before requesting follow-ups.");if(y||A)return;if(!c)return void alert("Please sign in to continue.");if(u.some(a=>a.query.toLowerCase()===b.toLowerCase()&&a.isLoading))return;let d=c.id||c.email||null;if(!d||!c.email)return void alert("Unable to identify the current user. Please sign in again.");let e=M(),f=new Date().toISOString(),g=q.task??"General";v(a=>[...a,{id:e,query:b,created_at:f,response:null,isLoading:!0,error:null}]);try{let a=await fetch(`${h}/api/assistant/query-v2`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:b,top_k:5,threshold:.7,validate:!0,task_name:g,user_id:d,user_email:c.email})}),i=await a.text(),j=null;if(i)try{j=JSON.parse(i)}catch{j=null}if(!a.ok){let a=j&&"object"==typeof j&&"detail"in j?j.detail:i?.trim()||void 0;throw Error(a??"Unable to generate a follow-up answer.")}let k=j??{},l={query:k.query??b,answer:k.answer??"",expanded_queries:Array.isArray(k.expanded_queries)?k.expanded_queries:[],sources:Array.isArray(k.sources)?k.sources:[],validation:k.validation??null};v(a=>a.map(a=>a.id===e?{...a,response:l,isLoading:!1,error:null}:a)),$(e,b,l,f)}catch(b){console.error("[ASSISTANT RESULT] Follow-up generation failed:",b);let a=b instanceof Error?b.message:"Unable to generate the follow-up answer.";v(b=>b.map(b=>b.id===e?{...b,isLoading:!1,error:a}:b))}},U=async a=>{let b=a.trim();if(!b||y||A)return;if(!c)return void alert("Please sign in to continue.");if(!o)return void L("Analysis result is unavailable. Please reload the task.");if(G.some(a=>a.query.toLowerCase()===b.toLowerCase()&&a.isLoading))return;let d=c.id||c.email||null;if(!d||!c.email)return void alert("Unable to identify the current user. Please sign in again.");let e=M(),f=new Date().toISOString();H(a=>[...a,{id:e,query:b,created_at:f,response:null,isLoading:!0,error:null}]);try{let a=await fetch(`${h}/api/assistant/query-v2`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:b,top_k:5,threshold:.7,validate:!0,task_name:"Analysis Docs Follow-up",user_id:d,user_email:c.email})}),f=await a.text(),g=null;if(f)try{g=JSON.parse(f)}catch{g=null}if(!a.ok){let a=g&&"object"==typeof g&&"detail"in g?g.detail:f?.trim()||void 0;throw Error(a??"Unable to generate an analysis follow-up answer.")}let i=g??{},j={query:i.query??b,answer:i.answer??"",expanded_queries:Array.isArray(i.expanded_queries)?i.expanded_queries:[],sources:Array.isArray(i.sources)?i.sources:[],validation:i.validation??null};H(a=>a.map(a=>a.id===e?{...a,response:j,isLoading:!1,error:null}:a)),L(null)}catch(b){console.error("[ASSISTANT RESULT] Analysis follow-up failed:",b);let a=b instanceof Error?b.message:"Unable to generate the follow-up answer.";H(b=>b.map(b=>b.id===e?{...b,isLoading:!1,error:a}:b)),L(a)}},V=async()=>{try{if(q){await navigator.clipboard.writeText(q.response.answer),alert("Answer copied to clipboard.");return}if(!o)return;await navigator.clipboard.writeText((a=>{let b=[];return b.push(`Task: ${a.task}`),b.push(`Original Query: ${a.query}`),b.push(`Source: ${a.source}`),b.push(""),b.push("Summary:"),b.push(a.summary||"No summary generated."),b.push(""),b.push("Detailed Analysis:"),b.push(a.analysis||"No detailed analysis available."),b.push(""),a.key_points.length>0&&(b.push("Key Points:"),a.key_points.forEach((a,c)=>{b.push(`${c+1}. ${a}`)}),b.push("")),a.keywords.length>0&&(b.push(`Keywords: ${a.keywords.join(", ")}`),b.push("")),a.comparisons.length>0&&(b.push("Comparative Insights:"),a.comparisons.forEach((a,c)=>{b.push(`${c+1}. ${a}`)}),b.push("")),a.table_markdown&&(b.push("Structured Comparison Table (Markdown):"),b.push(a.table_markdown),b.push("")),b.push(`Input characters analyzed: ${a.input_characters}`),a.truncated&&b.push("Note: Input was truncated to fit the token budget."),b.join("\n")})(o)),alert("Analysis copied to clipboard.")}catch(a){console.error("[ASSISTANT RESULT] Copy failed:",a),alert("Unable to copy content. Please copy manually.")}},W=(a,b,c)=>{if(!c)return void alert("Answer is still generating. Please try again once it is ready.");x(d=>{let e={...d};return e[a]?delete e[a]:e[a]={id:a,question:b,response:c},e}),D(null)},X=async()=>null,Y=async()=>{if(!q&&o){D(null),z(!0);try{let a=await X();if(!a)throw Error("PDF generator unavailable.");let b=new a({unit:"pt",format:"a4"}),d=b.internal.pageSize.getWidth(),e=b.internal.pageSize.getHeight(),f=d-96,g=c?.name||c?.email||"Advotac User",h=new Date().toLocaleString(),i=48,j=a=>{i+a>e-48&&(b.addPage(),i=48)};if(b.setFont("helvetica","bold"),b.setFontSize(18),b.text("Advotac Analysis Report",48,i),i+=28,b.setFont("helvetica","normal"),b.setFontSize(12),b.text(`Name of User: ${g}`,48,i),i+=18,b.text(`Generated At: ${h}`,48,i),i+=24,b.text(`Source: ${o.source}`,48,i),i+=24,b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(14,133,135),b.text("Summary",48,i),i+=18,b.setFont("helvetica","normal"),b.setFontSize(12),b.setTextColor(0,0,0),b.splitTextToSize(o.summary,f).forEach(a=>{j(16),b.text(a,48,i),i+=16}),i+=12,b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(14,133,135),b.text("Detailed Analysis",48,i),i+=18,b.setFont("helvetica","normal"),b.setFontSize(12),b.setTextColor(0,0,0),b.splitTextToSize(o.analysis,f).forEach(a=>{j(16),b.text(a,48,i),i+=16}),i+=12,o.key_points.length>0&&(b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(14,133,135),b.text("Key Points",48,i),i+=18,b.setFont("helvetica","normal"),b.setFontSize(12),b.setTextColor(0,0,0),o.key_points.forEach((a,c)=>{j(16);let d=`${c+1}. ${a}`;b.text(b.splitTextToSize(d,f),48,i),i+=16}),i+=12),o.keywords.length>0){b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(14,133,135),b.text("Keywords",48,i),i+=18,b.setFont("helvetica","normal"),b.setFontSize(12),b.setTextColor(0,0,0);let a=o.keywords.join(", ");b.splitTextToSize(a,f).forEach(a=>{j(16),b.text(a,48,i),i+=16}),i+=12}o.comparisons.length>0&&(b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(14,133,135),b.text("Comparative Insights",48,i),i+=18,b.setFont("helvetica","normal"),b.setFontSize(12),b.setTextColor(0,0,0),o.comparisons.forEach((a,c)=>{j(16),b.text(b.splitTextToSize(`${c+1}. ${a}`,f),48,i),i+=16}),i+=12),o.table_markdown&&(b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(14,133,135),b.text("Structured Comparison (Markdown)",48,i),i+=18,b.setFont("helvetica","normal"),b.setFontSize(11),b.setTextColor(0,0,0),b.splitTextToSize(o.table_markdown,f).forEach(a=>{j(16),b.text(a,48,i),i+=16}),i+=12),b.setFont("helvetica","bold"),b.setFontSize(12),b.setTextColor(14,133,135),b.text("Metadata",48,i),i+=16,b.setFont("helvetica","normal"),b.setFontSize(11),b.setTextColor(0,0,0),[`Original Query: ${o.query}`,`Input Characters: ${o.input_characters}`,o.truncated?"Note: Input was truncated to fit the token budget.":null].filter(Boolean).forEach(a=>{j(16),b.text(b.splitTextToSize(a,f),48,i),i+=16});let k=b.getNumberOfPages();for(let a=1;a<=k;a+=1)b.setPage(a),b.setFont("helvetica","italic"),b.setFontSize(9),b.setTextColor(120,120,120),b.text("Generated by Advotac",48,e-24);b.save(`advotac-analysis-${o.token}.pdf`)}catch(a){console.error("[ASSISTANT RESULT] Analysis PDF generation failed:",a),D(a instanceof Error?a.message:"Unable to generate PDF. Please try again later.")}finally{z(!1)}return}if(0===Q)return void D("Please add at least one answer to the result before generating a PDF.");if(!c)return void D("Please sign in to generate a PDF.");D(null),z(!0);try{let a=await X();if(!a)throw Error("PDF generator unavailable.");let b=new a({unit:"pt",format:"a4"}),d=b.internal.pageSize.getWidth(),e=b.internal.pageSize.getHeight(),f=d-96,g=c.name||c.email||"Advotac User",h=new Date().toLocaleString(),i=48,j=a=>{i+a>e-48&&(b.addPage(),i=48)};b.setFont("helvetica","bold"),b.setFontSize(18),b.text("Advotac Result Bundle",48,i),i+=28,b.setFont("helvetica","normal"),b.setFontSize(12),b.text(`Name of User: ${g}`,48,i),i+=18,b.text(`Generated At: ${h}`,48,i),i+=24,P.forEach((a,c)=>{let d=a.response.answer||"No answer available.",e=`Question ${c+1}`;j(64),b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(14,133,135),b.text(e,48,i),i+=18,b.setFont("helvetica","bold"),b.setFontSize(12),b.setTextColor(0,0,0),b.splitTextToSize(a.question,f).forEach(a=>{j(16),b.text(a,48,i),i+=16}),j(32),b.setFont("helvetica","normal"),b.setFontSize(12),b.splitTextToSize(d,f).forEach(a=>{j(16),b.text(a,48,i),i+=16}),a.response.sources&&a.response.sources.length>0&&(j(32),b.setFont("helvetica","bold"),b.setFontSize(11),b.text("Sources:",48,i),i+=16,b.setFont("helvetica","normal"),b.setFontSize(10),a.response.sources.forEach((a,c)=>{let d=[a.layer?`Layer ${a.layer}`:null,a.collection||null,a.doc_title||a.act_title||a.section_heading||a.heading||null].filter(Boolean).join(" • "),e=a.snippet?`Snippet: ${a.snippet}`:null;b.splitTextToSize(`${c+1}. ${d}${e?`
${e}`:""}`,f).forEach(a=>{j(16),b.text(a,60,i),i+=16}),i+=4})),i+=12}),j(40),b.setFont("helvetica","italic"),b.setFontSize(9),b.setTextColor(100,100,100);let k=b.getNumberOfPages();for(let a=1;a<=k;a+=1)b.setPage(a),b.setFont("helvetica","italic"),b.setFontSize(9),b.setTextColor(120,120,120),b.text("Generated by Advotac",48,e-24);b.save(`advotac-results-${Date.now()}.pdf`)}catch(a){console.error("[ASSISTANT RESULT] PDF generation failed:",a),D(a instanceof Error?a.message:"Unable to generate PDF. Please try again later.")}finally{z(!1)}},Z=async()=>{if(!q&&o){D(null),B(!0);try{let a=c?.name||c?.email||"Advotac User",b=new Date().toLocaleString(),d=['<html><head><meta charset="utf-8" />',"<style>body{font-family:Arial, sans-serif;line-height:1.6;font-size:12pt;color:#111827;}h1{color:#0E8587;}h2{color:#0E8587;margin-top:24px;}p{margin:8px 0;}ul{margin:8px 0 8px 20px;}li{margin:4px 0;}strong{color:#0E8587;} .divider{margin:24px 0;border-top:1px solid #e5e7eb;} .meta{color:#374151;} .disclaimer{font-size:10px;color:#6b7280;margin-top:24px;} .pill{display:inline-block;margin:4px 8px 0 0;padding:4px 10px;border-radius:999px;background:#e6f7f8;color:#0E8587;font-size:11pt;font-weight:600;} pre{background:#f9fafb;padding:16px;border-radius:12px;overflow-x:auto;}</style>","</head><body>","<h1>Advotac Analysis Report</h1>",`<p class="meta"><strong>Name of User:</strong> ${R(a)}</p>`,`<p class="meta"><strong>Generated At:</strong> ${R(b)}</p>`,`<p class="meta"><strong>Source:</strong> ${R(o.source)}</p>`,'<div class="divider"></div>',"<h2>Summary</h2>",`<p>${R(o.summary||"No summary available.")}</p>`,"<h2>Detailed Analysis</h2>",`<p>${R(o.analysis||"No detailed analysis available.")}</p>`];o.key_points.length>0&&(d.push("<h2>Key Points</h2>"),d.push("<ul>"),o.key_points.forEach(a=>{d.push(`<li>${R(a)}</li>`)}),d.push("</ul>")),o.keywords.length>0&&(d.push("<h2>Keywords</h2>"),d.push("<div>"),o.keywords.forEach(a=>{d.push(`<span class="pill">${R(a)}</span>`)}),d.push("</div>")),o.comparisons.length>0&&(d.push("<h2>Comparative Insights</h2>"),d.push("<ul>"),o.comparisons.forEach(a=>{d.push(`<li>${R(a)}</li>`)}),d.push("</ul>")),o.table_markdown&&(d.push("<h2>Structured Comparison (Markdown)</h2>"),d.push(`<pre>${R(o.table_markdown)}</pre>`)),d.push("<h2>Metadata</h2>"),d.push("<ul>"),d.push(`<li><strong>Original Query:</strong> ${R(o.query)}</li>`),d.push(`<li><strong>Input Characters:</strong> ${o.input_characters}</li>`),o.truncated&&d.push("<li><strong>Note:</strong> Input was truncated to fit the token budget.</li>"),d.push("</ul>"),d.push("</body></html>");let e=new Blob([d.join("")],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),f=URL.createObjectURL(e),g=document.createElement("a");g.href=f,g.download=`advotac-analysis-${o.token}.docx`,g.click(),URL.revokeObjectURL(f)}catch(a){console.error("[ASSISTANT RESULT] Analysis DOC generation failed:",a),D(a instanceof Error?a.message:"Unable to download document. Please try again later.")}finally{B(!1)}return}if(0===Q)return void D("Please add at least one answer to the result before downloading a document.");D(null),B(!0);try{let a=c?.name||c?.email||"Advotac User",b=new Date().toLocaleString(),d=['<html><head><meta charset="utf-8" />',"<style>body{font-family:Arial, sans-serif;line-height:1.6;font-size:12pt;color:#111827;}h1{color:#0E8587;}h2{color:#0E8587;margin-top:24px;}p{margin:8px 0;}ul{margin:8px 0 8px 20px;}li{margin:4px 0;}strong{color:#0E8587;} .divider{margin:24px 0;border-top:1px solid #e5e7eb;} .meta{color:#374151;} .disclaimer{font-size:10px;color:#6b7280;margin-top:24px;}</style>","</head><body>","<h1>Advotac Result Bundle</h1>",`<p class="meta"><strong>Name of User:</strong> ${R(a)}</p>`,`<p class="meta"><strong>Generated At:</strong> ${R(b)}</p>`];P.forEach((a,b)=>{d.push('<div class="divider"></div>'),d.push(`<h2>Question ${b+1}</h2>`),d.push(`<p><strong>Prompt:</strong> ${R(a.question)}</p>`),d.push("<p><strong>Answer:</strong></p>");let c=(a.response.answer||"No answer available.").split(/\n+/).map(a=>a.trim()).filter(a=>a.length>0);0===c.length?d.push("<p>No answer available.</p>"):c.forEach(a=>{d.push(`<p>${R(a)}</p>`)}),a.response.sources&&a.response.sources.length>0&&(d.push("<p><strong>Sources:</strong></p>"),d.push("<ul>"),a.response.sources.forEach((a,b)=>{let c=[a.layer?`Layer ${a.layer}`:null,a.collection||null,a.doc_title||a.act_title||a.section_heading||a.heading||null].filter(Boolean).join(" • "),e=c?`${b+1}. ${c}`:`${b+1}. Source`,f=a.snippet?`<br/><em>Snippet:</em> ${R(a.snippet)}`:"";d.push(`<li>${R(e)}${f}</li>`)}),d.push("</ul>")),a.response.validation&&(d.push("<p><strong>Validation:</strong></p>"),d.push(`<p>${R(a.response.validation)}</p>`))}),d.push("</body></html>");let e=new Blob([d.join("")],{type:"application/msword"}),f=URL.createObjectURL(e),g=document.createElement("a");g.href=f,g.download=`advotac-results-${Date.now()}.doc`,g.click(),URL.revokeObjectURL(f)}catch(a){console.error("[ASSISTANT RESULT] DOC generation failed:",a),D(a instanceof Error?a.message:"Unable to download document. Please try again later.")}finally{B(!1)}},$=async(a,b,d,e)=>{if(!q||!c)return;let f=q.task||"General",g=`${f} Follow-up`;try{await fetch(`${h}/api/assistant/general-history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a,parent_token:q.token,task_name:g,query:b,response:d,user_id:c.id||c.email,user_email:c.email,created_at:e})})}catch(a){console.warn("[ASSISTANT RESULT] Failed to persist follow-up history:",a)}},_=(a,b,c)=>{let e=a?((a,b)=>{let c=[],d=b?.trim()||"this topic",e=a=>{let b=a?.trim();b&&(c.some(a=>a.toLowerCase()===b.toLowerCase())||c.push(b))};return a?.expanded_queries?.forEach(a=>e(a)),c.length<4&&g.forEach(a=>{c.length>=4||e(a(d))}),c.slice(0,4)})(a,b):[],f=c.isPrimary?"general-result":"general-result general-follow-up",h=!!(a&&!c.isLoading&&!c.errorMessage),j=y||A,k=E[c.id]??{value:"",error:null};return(0,d.jsxs)("div",{className:f,children:[(0,d.jsxs)("div",{className:"general-section",children:[(0,d.jsx)("h3",{children:"Prompt"}),(0,d.jsx)("p",{className:"general-query",children:b})]}),(0,d.jsxs)("div",{className:"general-section",children:[(0,d.jsx)("h3",{children:"Answer"}),(0,d.jsx)("div",{className:"general-answer",children:c.isLoading?(0,d.jsx)("div",{className:"follow-up-loading",children:"Generating follow-up answer..."}):c.errorMessage?(0,d.jsx)("div",{className:"assistant-error",children:c.errorMessage}):a?(0,d.jsx)(i,{answer:a.answer}):(0,d.jsx)("div",{className:"follow-up-loading",children:"No answer available yet."})})]}),(0,d.jsxs)("div",{className:"general-section answer-actions",children:[(0,d.jsxs)("div",{className:"answer-actions-row",children:[(0,d.jsx)("button",{type:"button",className:`answer-action-button ${c.isSelected?"selected":""}`,onClick:c.onToggleSelection,disabled:!h||j,children:c.isSelected?"Remove from Result":"Add to Result"}),(0,d.jsx)("button",{type:"button",className:"answer-action-button primary",onClick:Y,disabled:j||0===Q,children:y?"Generating PDF...":"Generate PDF"}),(0,d.jsx)("button",{type:"button",className:"answer-action-button primary secondary",onClick:Z,disabled:j||0===Q,children:A?"Preparing Doc...":"Download Doc"})]}),(0,d.jsx)("p",{className:"answer-actions-hint",children:Q>0?`${Q} answer${Q>1?"s":""} selected for export.`:"Select at least one answer to include it in the export."}),c.isPrimary&&C&&(0,d.jsx)("div",{className:"assistant-error pdf-error",children:C})]}),a&&e.length>0&&(0,d.jsxs)("div",{className:"general-section general-suggestions",children:[(0,d.jsx)("h3",{children:"Suggested Follow-up Questions"}),(0,d.jsx)("p",{className:"general-suggestions-hint",children:"Select a question to generate a fresh response."}),(0,d.jsx)("div",{className:"suggestion-buttons",children:e.map(a=>{let b=u.some(b=>b.query.toLowerCase()===a.toLowerCase()&&b.isLoading),e=b||!!c.isLoading||N||j;return(0,d.jsx)("button",{className:"suggestion-button",onClick:()=>void T(a),disabled:e,type:"button",children:b?"Generating...":e?"Please wait...":a},`${c.id}-suggestion-${a}`)})})]}),a&&(0,d.jsxs)("div",{className:"general-section general-custom-question",children:[(0,d.jsx)("h3",{children:"Ask Your Own Follow-up"}),(0,d.jsx)("p",{className:"general-suggestions-hint",children:"Keep the question focused on this matter and we'll respond in the same structured format."}),(0,d.jsxs)("form",{className:"custom-question-form",onSubmit:a=>((a,b,c)=>{a.preventDefault();let d=E[b]?.value??"",e=d.trim();return e?q?S(e,c)?void(F(a=>({...a,[b]:{value:"",error:null}})),T(e)):void F(a=>({...a,[b]:{value:d,error:"Please keep your follow-up related to the original request."}})):void F(a=>({...a,[b]:{value:d,error:"Follow-up questions are only available for saved task results."}})):void F(a=>({...a,[b]:{value:d,error:"Please enter a follow-up question."}}))})(a,c.id,b),children:[(0,d.jsx)("textarea",{className:"custom-question-textarea",placeholder:"Type your follow-up question here...",value:k.value,onChange:a=>{let b=a.target.value;F(a=>({...a,[c.id]:{value:b,error:null}}))},rows:3,disabled:N||j}),k.error&&(0,d.jsx)("div",{className:"assistant-error custom-question-error",children:k.error}),(0,d.jsx)("div",{className:"custom-question-actions",children:(0,d.jsx)("button",{type:"submit",className:"suggestion-button custom-question-submit",disabled:N||j||!(k.value&&k.value.trim().length>0),children:N?"Please wait...":"Generate Follow-up Answer"})})]})]}),a&&a.sources.length>0&&(0,d.jsxs)("div",{className:"general-section",children:[(0,d.jsx)("h3",{children:"Sources"}),(0,d.jsx)("div",{className:"general-sources",children:a.sources.map((a,b)=>(0,d.jsxs)("div",{className:"general-source-card",children:[(0,d.jsxs)("div",{className:"general-source-header",children:[a.layer&&(0,d.jsx)("span",{className:"general-source-badge",children:a.layer}),"number"==typeof a.score&&!Number.isNaN(a.score)&&(0,d.jsxs)("span",{className:"general-source-score",children:["Score ",(100*a.score).toFixed(1),"%"]})]}),a.collection&&(0,d.jsx)("p",{className:"general-source-collection",children:a.collection}),(a.doc_title||a.act_title||a.section_heading||a.heading)&&(0,d.jsx)("h4",{className:"general-source-title",children:a.doc_title??a.act_title??a.section_heading??a.heading}),(a.section_number||a.context_path||a.breadcrumbs)&&(0,d.jsx)("p",{className:"general-source-meta",children:[a.section_number,a.context_path,a.breadcrumbs].filter(Boolean).join(" • ")}),a.snippet&&(0,d.jsx)("p",{className:"general-source-snippet",children:a.snippet})]},`${c.id}-source-${b}`))})]}),a?.validation&&(0,d.jsxs)("div",{className:"general-section general-validation",children:[(0,d.jsx)("h3",{children:"Validation"}),(0,d.jsx)("p",{children:a.validation})]})]},c.id)};if(k)return(0,d.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#f7f9fc"},children:(0,d.jsx)("div",{style:{textAlign:"center"},children:(0,d.jsx)("div",{style:{fontSize:"24px",marginBottom:"16px",color:"#0E8587"},children:"Loading..."})})});let aa=!!(q||o),ab=q?.task??o?.task??"Analysis",ac=q?`${ab} Task Complete`:o?"Analysis Complete":m?"Processing Your Request":"Result Unavailable",ad=q?`Your assistant finished processing the ${ab.toLowerCase()} request.`:o?"Your assistant finished processing the request.":m?"Your assistant is analyzing your request...":s??"Unable to load the requested result.",ae=q?new Date(q.created_at).toLocaleString():o?new Date(o.created_at).toLocaleString():"—",af=(a=>{if(!a)return[];let b=[],c=new Set,d=a.query?.trim()||"this matter",e=a=>{let d=a?.trim();if(!d)return;let e=d.toLowerCase();c.has(e)||(c.add(e),b.push(d))};return a.keywords.slice(0,4).forEach(a=>{e(`How does ${a} apply under Indian law in this context?`),e(`What statutory defences could counter ${a}?`)}),b.length<6&&(e(`Which Indian precedents align with "${d}"?`),e(`What compliance steps arise from "${d}" under Indian law?`),e(`Identify emerging risks related to "${d}" in India.`),e(`What remedies are available in India for disputes similar to "${d}"?`),e(`How would courts balance equities in "${d}" situations?`),e(`Does "${d}" trigger procedural obligations under the CrPC or CPC?`)),b.slice(0,6)})(o);return(0,d.jsxs)("div",{className:"dashboard-container",children:[(0,d.jsxs)("aside",{className:"sidebar",children:[(0,d.jsx)("div",{className:"sidebar-header",children:(0,d.jsxs)("div",{className:"logo",children:[(0,d.jsx)("img",{src:"/advotac_logo.png",alt:"Advotac Logo",className:"logo-image"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{children:"Advotac"}),(0,d.jsx)("p",{children:"Legal AI Workspace"})]})]})}),(0,d.jsxs)("nav",{className:"sidebar-nav",children:[(0,d.jsxs)("a",{href:"/dashboard",className:"nav-item",children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})}),"Overview"]}),(0,d.jsxs)("a",{href:"/assistant",className:"nav-item active",children:[(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,d.jsx)("path",{d:"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"}),(0,d.jsx)("path",{d:"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z"})]}),"Assistant"]}),(0,d.jsxs)("a",{href:"/research",className:"nav-item",children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"})}),"Research"]}),(0,d.jsxs)("a",{href:"/drafting",className:"nav-item",children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),"Drafting"]}),(0,d.jsxs)("a",{href:"/workflow",className:"nav-item",children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"Workflow"]}),(0,d.jsxs)("a",{href:"/history",className:"nav-item",children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),"History"]})]}),(0,d.jsxs)("div",{className:"sidebar-footer",children:[(0,d.jsxs)("a",{href:"/settings",className:"nav-item",children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"Settings"]}),(0,d.jsxs)("button",{onClick:()=>{localStorage.clear(),window.location.replace("/auth")},className:"nav-item logout-btn",children:[(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z",clipRule:"evenodd"})}),"Logout"]})]})]}),(0,d.jsxs)("main",{className:"main-content",children:[(0,d.jsx)("header",{className:"dashboard-header",children:(0,d.jsxs)("div",{className:"header-left",children:[(0,d.jsx)("button",{className:"back-button",onClick:()=>a.push("/assistant"),title:"Go back",children:(0,d.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{children:"Assistant Result"}),(0,d.jsxs)("span",{className:"output-type-badge",children:[(0,d.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M3 7h18"}),(0,d.jsx)("path",{d:"M3 12h18"}),(0,d.jsx)("path",{d:"M3 17h18"})]}),ab]})]})]})}),(0,d.jsx)("div",{className:"result-content",children:(0,d.jsxs)("div",{className:"result-wrapper",children:[(0,d.jsxs)("section",{className:"result-status",children:[(0,d.jsx)("div",{className:aa?"status-icon success":"status-icon processing",children:aa?(0,d.jsx)("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("polyline",{points:"20 6 9 17 4 12"})}):(0,d.jsxs)("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,d.jsx)("path",{d:"M12 6v6l4 2"})]})}),(0,d.jsxs)("div",{className:"status-content",children:[(0,d.jsx)("h2",{children:ac}),(0,d.jsx)("p",{children:ad}),!aa&&s&&(0,d.jsx)("div",{className:"assistant-error",style:{marginTop:"12px"},children:s}),!aa&&(0,d.jsx)("button",{className:"retry-button",onClick:()=>{if(b.startsWith("gen-"))return void a.push("/assistant");n(!0),t(null),sessionStorage.removeItem("latestAnalysis"),window.location.reload()},children:b.startsWith("gen-")?"Start New Request":"Retry Fetch"})]})]}),(0,d.jsxs)("section",{className:"info-cards",children:[(0,d.jsxs)("div",{className:"info-card",children:[(0,d.jsx)("div",{className:"info-icon",children:(0,d.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("path",{d:"M12 2l1.09 3.36L16 6l-2.5 1.82L14 11l-2-1.45L10 11l.5-3.18L8 6l2.91-.64L12 2z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{children:"Status"}),(0,d.jsx)("p",{children:aa?"Completed":m?"Processing":"Unavailable"}),(0,d.jsx)("small",{children:"Latest update"})]})]}),(0,d.jsxs)("div",{className:"info-card",children:[(0,d.jsx)("div",{className:"info-icon",children:(0,d.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,d.jsx)("path",{d:"M3 5h18M3 12h18M3 19h18"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{children:"Task"}),(0,d.jsx)("p",{children:ab}),(0,d.jsx)("small",{children:"Requested action"})]})]}),(0,d.jsxs)("div",{className:"info-card",children:[(0,d.jsx)("div",{className:"info-icon",children:(0,d.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M12 8v4l3 3"}),(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10"})]})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{children:"Created"}),(0,d.jsx)("p",{children:ae}),(0,d.jsx)("small",{children:"Submission time"})]})]})]}),(0,d.jsxs)("section",{className:"result-preview",children:[(0,d.jsxs)("div",{className:"preview-header",children:[(0,d.jsx)("h2",{children:q?`${ab} Output`:"Analysis Output"}),aa&&(0,d.jsxs)("div",{className:"preview-actions",children:[(0,d.jsxs)("button",{onClick:V,children:[(0,d.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,d.jsx)("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"})]}),"Copy"]}),q?(0,d.jsxs)("button",{onClick:()=>{if(q){let a=(q.task||"General").toLowerCase().replace(/[^a-z0-9]+/g,"-"),b=new Blob([q.response.answer],{type:"text/plain;charset=utf-8"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`advotac-${a}-${q.token}.txt`,d.click(),URL.revokeObjectURL(c);return}},children:[(0,d.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"}),(0,d.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,d.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Download"]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("button",{onClick:()=>void Y(),disabled:y,children:[(0,d.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"}),(0,d.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,d.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),y?"Preparing PDF...":"Download PDF"]}),(0,d.jsxs)("button",{onClick:()=>void Z(),disabled:A,children:[(0,d.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,d.jsx)("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),(0,d.jsx)("polyline",{points:"14 2 14 8 20 8"})]}),A?"Preparing Docx...":"Download Docx"]})]})]})]}),q?(0,d.jsxs)(d.Fragment,{children:[_(q.response,q.query,{id:q.token,isPrimary:!0,isSelected:!!w[q.token],onToggleSelection:()=>W(q.token,q.query,q.response)}),u.length>0&&(0,d.jsx)("div",{className:"follow-up-list",children:u.map(a=>_(a.response,a.query,{id:a.id,isPrimary:!1,isLoading:a.isLoading,errorMessage:a.error??null,isSelected:!!w[a.id],onToggleSelection:()=>W(a.id,a.query,a.response)}))})]}):(0,d.jsx)("div",{className:"result-box",children:o?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"general-section general-result",children:[(0,d.jsx)("h3",{children:"Summary"}),(0,d.jsx)("p",{children:o.summary||"No summary available."}),(0,d.jsxs)("div",{className:"general-section general-analysis",children:[(0,d.jsx)("h3",{children:"Detailed Analysis"}),(0,d.jsx)("p",{children:o.analysis||"No detailed analysis available."})]}),o.key_points.length>0&&(0,d.jsxs)("div",{className:"general-section general-suggestions",children:[(0,d.jsx)("h3",{children:"Key Points"}),(0,d.jsx)("ul",{className:"general-analysis-points",children:o.key_points.map((a,b)=>(0,d.jsx)("li",{children:a},`${o.token}-point-${b}`))})]}),o.keywords.length>0&&(0,d.jsxs)("div",{className:"general-section general-keywords",children:[(0,d.jsx)("h3",{children:"Keywords"}),(0,d.jsx)("div",{className:"general-analysis-keywords",children:o.keywords.map((a,b)=>(0,d.jsx)("span",{className:"general-keyword-pill",children:a},`${o.token}-keyword-${b}`))})]}),o.comparisons.length>0&&(0,d.jsxs)("div",{className:"general-section general-comparisons",children:[(0,d.jsx)("h3",{children:"Comparative Insights"}),(0,d.jsx)("ul",{className:"general-analysis-points",children:o.comparisons.map((a,b)=>(0,d.jsx)("li",{children:a},`${o.token}-comparison-${b}`))})]}),o.table_markdown&&(0,d.jsxs)("div",{className:"general-section general-table",children:[(0,d.jsx)("h3",{children:"Structured Comparison"}),(0,d.jsx)("pre",{className:"general-analysis-table",children:o.table_markdown})]}),af.length>0&&(0,d.jsxs)("div",{className:"general-section general-suggestions",children:[(0,d.jsx)("h3",{children:"Suggested Follow-up Questions"}),(0,d.jsx)("p",{className:"general-suggestions-hint",children:"Select a question to run it through the RAG pipeline."}),(0,d.jsx)("div",{className:"suggestion-buttons",children:af.map(a=>{let b=G.some(b=>b.query.toLowerCase()===a.toLowerCase()&&b.isLoading),c=b||O||y||A;return(0,d.jsx)("button",{className:"suggestion-button",onClick:()=>{U(a)},disabled:c,type:"button",children:b?"Generating...":c?"Please wait...":a},`analysis-suggestion-${a}`)})})]}),(0,d.jsxs)("div",{className:"general-section general-custom-question",children:[(0,d.jsx)("h3",{children:"Ask Your Own Follow-up"}),(0,d.jsx)("p",{className:"general-suggestions-hint",children:"Keep the question focused on this matter and we'll respond with sources using RAG."}),(0,d.jsxs)("form",{className:"custom-question-form",onSubmit:a=>{if(a.preventDefault(),!o)return void L("Analysis result is unavailable. Please reload the task.");let b=I.trim();return b?S(b,o.query)?void(J(""),L(null),U(b)):void L("Please keep your follow-up related to the original analysis."):void L("Please enter a follow-up question.")},children:[(0,d.jsx)("textarea",{className:"custom-question-textarea",placeholder:"Type your follow-up question here...",value:I,onChange:a=>{J(a.target.value),L(null)},rows:3,disabled:O||y||A}),K&&(0,d.jsx)("div",{className:"assistant-error custom-question-error",children:K}),(0,d.jsx)("div",{className:"custom-question-actions",children:(0,d.jsx)("button",{type:"submit",className:"suggestion-button custom-question-submit",disabled:O||y||A||!(I&&I.trim().length>0),children:O?"Please wait...":"Generate Follow-up Answer"})})]})]}),(0,d.jsxs)("div",{className:"general-section general-meta",children:[(0,d.jsx)("h3",{children:"Analysis Details"}),(0,d.jsxs)("ul",{className:"general-analysis-meta",children:[(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Original Query:"})," ",o.query]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Source:"})," ",o.source]}),(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Input Characters:"})," ",o.input_characters]}),o.truncated&&(0,d.jsxs)("li",{children:[(0,d.jsx)("strong",{children:"Note:"})," Input was truncated to fit the token budget."]})]})]})]}),G.length>0&&(0,d.jsx)("div",{className:"follow-up-list",children:G.map(a=>(a=>{let b=a.response;return(0,d.jsxs)("div",{className:"general-result general-follow-up",children:[(0,d.jsxs)("div",{className:"general-section",children:[(0,d.jsx)("h3",{children:"Follow-up Question"}),(0,d.jsx)("p",{className:"general-query",children:a.query})]}),(0,d.jsxs)("div",{className:"general-section",children:[(0,d.jsx)("h3",{children:"Answer"}),(0,d.jsx)("div",{className:"general-answer",children:a.isLoading?(0,d.jsx)("div",{className:"follow-up-loading",children:"Generating follow-up answer..."}):a.error?(0,d.jsx)("div",{className:"assistant-error",children:a.error}):b?(0,d.jsx)(i,{answer:b.answer}):(0,d.jsx)("div",{className:"follow-up-loading",children:"No answer available yet."})})]}),b?.sources&&b.sources.length>0&&(0,d.jsxs)("div",{className:"general-section",children:[(0,d.jsx)("h3",{children:"Sources"}),(0,d.jsx)("div",{className:"general-sources",children:b.sources.map((b,c)=>(0,d.jsxs)("div",{className:"general-source-card",children:[(0,d.jsxs)("div",{className:"general-source-header",children:[b.layer&&(0,d.jsx)("span",{className:"general-source-badge",children:b.layer}),"number"==typeof b.score&&!Number.isNaN(b.score)&&(0,d.jsxs)("span",{className:"general-source-score",children:["Score ",(100*b.score).toFixed(1),"%"]})]}),b.collection&&(0,d.jsx)("p",{className:"general-source-collection",children:b.collection}),(b.doc_title||b.act_title||b.section_heading||b.heading)&&(0,d.jsx)("h4",{className:"general-source-title",children:b.doc_title??b.act_title??b.section_heading??b.heading}),(b.section_number||b.context_path||b.breadcrumbs)&&(0,d.jsx)("p",{className:"general-source-meta",children:[b.section_number,b.context_path,b.breadcrumbs].filter(Boolean).join(" • ")}),b.snippet&&(0,d.jsx)("p",{className:"general-source-snippet",children:b.snippet})]},`${a.id}-source-${c}`))})]}),b?.validation&&(0,d.jsxs)("div",{className:"general-section general-validation",children:[(0,d.jsx)("h3",{children:"Validation"}),(0,d.jsx)("p",{children:b.validation})]})]},a.id)})(a))})]}):m?(0,d.jsx)("div",{className:"loading-placeholder",children:"Waiting for analysis result..."}):(0,d.jsx)("div",{className:"loading-placeholder",children:"Unable to load analysis result. Please retry or contact support."})})]})]})})]})]})}},22116:(a,b,c)=>{"use strict";c.d(b,{default:()=>f});var d=c(21124),e=c(57461);function f({children:a}){return(0,d.jsx)(e.SessionProvider,{children:a})}},42378:(a,b,c)=>{"use strict";var d=c(91330);c.o(d,"useParams")&&c.d(b,{useParams:function(){return d.useParams}}),c.o(d,"useRouter")&&c.d(b,{useRouter:function(){return d.useRouter}}),c.o(d,"useSearchParams")&&c.d(b,{useSearchParams:function(){return d.useSearchParams}})},44222:(a,b,c)=>{Promise.resolve().then(c.bind(c,22116))},51472:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>k,metadata:()=>j});var d=c(75338),e=c(94294),f=c.n(e),g=c(81464),h=c.n(g);c(61135);var i=c(66482);let j={title:"Advotac - Legal AI Platform",description:"AI-powered legal research and case management"};function k({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:`${f().variable} ${h().variable} antialiased`,children:(0,d.jsx)(i.default,{children:a})})})}},53806:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},61135:()=>{},66482:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\Deployment\\\\advotac_docker2\\\\nextjsadvotac\\\\src\\\\components\\\\AuthProvider.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\Deployment\\advotac_docker2\\nextjsadvotac\\src\\components\\AuthProvider.tsx","default")},75504:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\Deployment\\\\advotac_docker2\\\\nextjsadvotac\\\\src\\\\app\\\\assistant\\\\task\\\\[token]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\Deployment\\advotac_docker2\\nextjsadvotac\\src\\app\\assistant\\task\\[token]\\page.tsx","default")},77537:()=>{},84070:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},97366:(a,b,c)=>{Promise.resolve().then(c.bind(c,66482))}};